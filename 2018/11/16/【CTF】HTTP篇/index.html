<!DOCTYPE html>
<html lang="">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  
  <title>Yan&#39;s Blog</title>
  
    <!-- stylesheets list from config.yml -->
    
      <link rel="stylesheet" href="/css/materialize.min.css">
    
      <link rel="stylesheet" href="/css/main.min.css">
    
  
  <style type="text/css">
      html{
          font-family: sans-serif;
          font-weight: 300;
      }
      @font-face {
          font-family: 'Material Icons';
          font-style: normal;
          font-weight: 400;
          src: url(/fonts/MaterialIcons-Regular.eot);
          src: url(/fonts/MaterialIcons-Regular.woff2) format('woff2'),
          url(/fonts/MaterialIcons-Regular.woff) format('woff'),
          url(/fonts/MaterialIcons-Regular.ttf) format('truetype')
      }
  </style>
<link rel="shortcut icon" href="/source/favicon.ico">
</head>
<body>
<div id="menu-box"><a href="javascript:void(0)" id="menu" data-activates="slide-out" class="button-collapse menu" ><span class="nav-btn"></span></a></div>
<div id="menu-outer">
  <div id="menu-inner">
      <ul id="slide-out" class="side-nav" >
    <div class="nav-header"  style="background-image: url(/images/header-bg_2.jpeg);background-color:#26A69A">
    <div class="header-box"><img src="/images/header.jpg" ondragstart="return false;"></div>
    <p>booooodv</p>
    <div class="nav-link">
        
        <a href="http://example.com" target="_blank"> <div class="link-box twitter"></div></a>
        
        
        <a  href="https://github.com/booooodv" target="_blank"><div class="link-box github"></div></a>
        
        
        <a href="mailto:1013388077@qq.com"><div class="link-box email"></div></a>
        
        
        <a href="https://weibo.com/5510910952" target="_blank"><div class="link-box weibo"></div></a>
        
        
        <a href="https://www.zhihu.com/people/yan-yun-feng-55/activities" target="_blank"> <div class="link-box zhihu"></div></a>
        
    </div>
    <div class="nav-search">
        <form id="search-form"> <!-- 搜索框相关 -->
            <input type="text" id="local-search-input" name="q" results="0" placeholder="搜索..." class="search form-control" autocomplete="off" autocorrect="off"/>
            <div class="nav-search-img"><i class="material-icons">search</i></div>
        </form>
        <div id="local-search-result"></div> <!-- 搜索结果区 -->
        <p class='no-result'>无搜索结果</p>
    </div>
</div>
    <!--Homepage-->

<li class="nav-list">
    <a href="/" target="_self">
        <div class="nav-ico"><i class="material-icons">home</i> </div><p>主页</p>
    </a>
</li>

<!--archives-->

<li class="nav-list dropdown-btn">
    <a  class=""  target="_self">
        <div class="nav-ico"><i class="material-icons">assignment</i></div><p>归档</p><div class="dropdown-ico"><i class="material-icons">arrow_drop_down</i></div>
    </a>
</li>

<ul class="dropdown-menu dropdown" >
    <li class="nav-dropdown-list">
        <a class="archive-link" href="/archives/2018/11/">November 2018<span class="archive-count">1</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2018/10/">October 2018<span class="archive-count">1</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2018/09/">September 2018<span class="archive-count">1</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2018/08/">August 2018<span class="archive-count">2</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2018/07/">July 2018<span class="archive-count">2</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2018/06/">June 2018<span class="archive-count">1</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2018/05/">May 2018<span class="archive-count">1</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2018/04/">April 2018<span class="archive-count">1</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2018/03/">March 2018<span class="archive-count">3</span></a></li><li class="nav-dropdown-list"><a class="archive-link" href="/archives/2018/02/">February 2018<span class="archive-count">3</span></a>
    </li>
</ul>
<!--categories-->

<li class="nav-list dropdown-btn">
    <a   class=""  target="_self">
        <div class="nav-ico"><i class="material-icons">dashboard</i></div><p>分类</p><div class="dropdown-ico"><i class="material-icons">arrow_drop_down</i></div>
    </a>
</li>

<ul class="dropdown-menu dropdown" >
    <li class="nav-dropdown-list">
        <a class="category-link" href="/categories/CTF相关/">CTF相关<span class="category-count">1</span></a></li><li class="nav-dropdown-list"><a class="category-link" href="/categories/Linux相关/">Linux相关<span class="category-count">1</span></a></li><li class="nav-dropdown-list"><a class="category-link" href="/categories/Mac软件/">Mac软件<span class="category-count">2</span></a></li><li class="nav-dropdown-list"><a class="category-link" href="/categories/学习过程/">学习过程<span class="category-count">6</span></a></li><li class="nav-dropdown-list"><a class="category-link" href="/categories/技术笔记/">技术笔记<span class="category-count">3</span></a></li><li class="nav-dropdown-list"><a class="category-link" href="/categories/生活/">生活<span class="category-count">1</span></a></li><li class="nav-dropdown-list"><a class="category-link" href="/categories/职业/">职业<span class="category-count">1</span></a></li><li class="nav-dropdown-list"><a class="category-link" href="/categories/赋启/">赋启<span class="category-count">1</span></a>
    </li>
</ul>
<!--tags-->

<li class="nav-list">
    <a href="/archives" target="_self">
        <div class="nav-ico"><i class="material-icons">bookmark</i> </div><p>标签</p>
    </a>
</li>

<!--photo-->

<!--friends-->

<li class="nav-list">
    <a href="/friends" target="_self">
        <div class="nav-ico"><i class="material-icons">face</i> </div><p>友链</p>
    </a>
</li>

<!--about-->

<li class="nav-list">
    <a href="/about" target="_self">
        <div class="nav-ico"><i class="material-icons">copyright</i> </div><p>关于</p>
    </a>
</li>


</ul>

  </div>
</div>

<div id="content-outer">
  <div id="content-inner">
    
<article id="post">
  <div class="post-page-title"  style="background-color:#26A69A;background-image:url(/images/random/vateral-16.png)" >
  <h2>【CTF】HTTP篇</h2>
    
  <p>作者:booooodv &nbsp&nbsp 发布于:<time datetime="2018-11-15T22:41:57.000Z">
          2018-11-16
    </time>
  </p>
    
  </div>
  <div class="post-page-content">
  <h3 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h3><p>HTTP(Hypertext Transfer Protocol)中文&lt;超文本传输协议&gt;，是一种为分布式，合作式，多媒体信息系统服务，面向应用层的协议，是Internet上目前使用最广泛的应用层协议   </p>
<p>它基于传输层的TCP协议进行通信，HTTP协议是通用的、无状态的协议，主要用于在服务器和客户机之间传输超文本文件<br><img src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1542332676950&amp;di=2ba8589f4115cc932ab06804ed8d4752&amp;imgtype=jpg&amp;src=http%3A%2F%2Fimg1.imgtn.bdimg.com%2Fit%2Fu%3D4202735791%2C3161582173%26fm%3D214%26gp%3D0.jpg" alt="">  </p>
<p>由HTTP客户端发起一个请求，建立一个到服务器指定端口（默认是80端口）的TCP连接。HTTP服务器则在那个端口监听客户端发送过来的请求。一旦收到请求，服务器（向客户端）发回一个状态行，比如”HTTP/1.1 200 OK”，和（响应的）消息，消息的消息体可能是请求的文件、错误消息、或者其它一些信息。</p>
<h3 id="建立HTTP连接"><a href="#建立HTTP连接" class="headerlink" title="建立HTTP连接"></a>建立HTTP连接</h3><p>建立HTTP连接的步骤：</p>
<ul>
<li>客户端与服务器端建立连接</li>
<li>客户端向服务器端发送请求</li>
<li>服务器端向客户端回复响应</li>
<li>断开连接</li>
</ul>
<h3 id="HTTP之请求Request"><a href="#HTTP之请求Request" class="headerlink" title="HTTP之请求Request"></a>HTTP之请求Request</h3><p>HTTP/1.1协议中共定义了八种方法（也叫&lt;动作&gt;）来以不同方式操作指定的资源。</p>
<p>但是因为最常用的只有两种，且CTF只会用到这两种就简单介绍这两种方法，需详细了解请自行查找。</p>
<h4 id="GET请求方法"><a href="#GET请求方法" class="headerlink" title="GET请求方法"></a>GET请求方法</h4><p>向指定的资源发出“显示”请求。使用GET方法应该只用在读取数据，而不应当被用于产生“副作用”的操作中，例如在Web Application中。其中一个原因是GET可能会被网络蜘蛛等随意访问。</p>
<h4 id="POST请求方法"><a href="#POST请求方法" class="headerlink" title="POST请求方法"></a>POST请求方法</h4><p>向指定资源提交数据，请求服务器进行处理（例如提交表单或者上传文件）。数据被包含在请求本文中。这个请求可能会创建新的资源或修改现有资源，或二者皆有。</p>
<h4 id="请求-Request-消息"><a href="#请求-Request-消息" class="headerlink" title="请求(Request)消息"></a>请求(Request)消息</h4><p>客户端发送一个HTTP请求到服务器的请求消息包括以下格式：</p>
<ul>
<li>请求行（request line）</li>
<li>请求头部（header）</li>
<li>空行 </li>
<li>请求数据</li>
</ul>
<p>四个部分组成</p>
<p><img src="https://upload-images.jianshu.io/upload_images/2964446-fdfb1a8fce8de946.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/466" alt=""></p>
<h5 id="GET请求例子："><a href="#GET请求例子：" class="headerlink" title="GET请求例子："></a>GET请求例子：</h5><pre><code>GET / HTTP/1.1
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Host: github.com
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/12.0 Safari/605.1.15
Accept-Language: zh-cn
Accept-Encoding: br, gzip, deflate
Connection: keep-alive
</code></pre><p>在HTTP/1.1协议中，所有的请求头，除Host外，都是可选的</p>
<p>第一行为请求行</p>
<p>第三行Host为必带的头部，用于指定主机</p>
<p>其中，请求行和标题必须以&lt;CR&gt;&lt;LF&gt;作为结尾，空行内必须只有&lt;CR&gt;&lt;LF&gt;而无其他空格</p>
<p>其他可以自行查阅资料了解</p>
<h4 id="响应（Response）消息"><a href="#响应（Response）消息" class="headerlink" title="响应（Response）消息"></a>响应（Response）消息</h4><p>Response是服务端回复客户端请求的消息，其组成包括:</p>
<ul>
<li>状态行（Status Line）</li>
<li>响应头 （Response Header Field）</li>
<li>空行（Empty Line）</li>
<li>消息体（Message Body）</li>
</ul>
<h5 id="Response响应例子："><a href="#Response响应例子：" class="headerlink" title="Response响应例子："></a>Response响应例子：</h5><pre><code>HTTP/1.1 200 OK
Date: Mon, 23 May 2018 22:38:34 GMT
Content-Type: text/html; charset=UTF-8
Content-Encoding: UTF-8
Content-Length: 138
Last-Modified: Wed, 08 Jan 2018 23:11:55 GMT
Server: Apache/1.3.3.7 (Unix) (Red-Hat/Linux)
ETag: &quot;3f80f-1b6-3e1cb03b&quot;
Accept-Ranges: bytes
Connection: close

&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;An Example Page&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  Hello World, this is a very simple HTML document.
&lt;/body&gt;
&lt;/html&gt;
</code></pre><p><strong>第一部分</strong> ：状态行，由HTTP协议版本号， 状态码， 状态消息 三部分组成。</p>
<p><strong>第二部分</strong> ：消息报头，用来说明客户端要使用的一些附加信息。例如，Date日期…</p>
<p><strong>第三部分</strong> ：空行，消息报头后面的空行是必须的</p>
<p><strong>第四部分</strong> ：响应正文，服务器返回给客户端的文本信息。</p>
<h3 id="状态码"><a href="#状态码" class="headerlink" title="状态码"></a>状态码</h3><p>状态代码有三位数字组成，第一个数字定义了响应的类别，共分五种类别:</p>
<ul>
<li>1xx：指示信息–表示请求已接收，继续处理</li>
<li>2xx：成功–表示请求已被成功接收、理解、接受</li>
<li>3xx：重定向–要完成请求必须进行更进一步的操作</li>
<li>4xx：客户端错误–请求有语法错误或请求无法实现</li>
<li>5xx：服务器端错误–服务器未能实现合法的请求</li>
</ul>
<p><strong>常见状态码</strong> ：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">200 OK                        //客户端请求成功  </span><br><span class="line">400 Bad Request               //客户端请求有语法错误，不能被服务器所理解  </span><br><span class="line">401 Unauthorized              //请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用   </span><br><span class="line">403 Forbidden                 //服务器收到请求，但是拒绝提供服务  </span><br><span class="line">404 Not Found                 //请求资源不存在，eg：输入了错误的URL   </span><br><span class="line">500 Internal Server Error     //服务器发生不可预期的错误  </span><br><span class="line">503 Server Unavailable        //服务器当前不能处理客户端的请求，一段时间后可能恢复正常</span><br></pre></td></tr></table></figure>
<p>更多状态码请自行查阅</p>
<h3 id="HTTP工作原理"><a href="#HTTP工作原理" class="headerlink" title="HTTP工作原理"></a>HTTP工作原理</h3><p>HTTP协议定义Web客户端如何从Web服务器请求Web页面，以及服务器如何把Web页面传送给客户端。HTTP协议采用了请求/响应模型。客户端向服务器发送一个请求报文，请求报文包含请求的方法、URL、协议版本、请求头部和请求数据。服务器以一个状态行作为响应，响应的内容包括协议的版本、成功或者错误代码、服务器信息、响应头部和响应数据。</p>
<p>以下是 HTTP 请求/响应的步骤：</p>
<h4 id="1、客户端连接到Web服务器"><a href="#1、客户端连接到Web服务器" class="headerlink" title="1、客户端连接到Web服务器"></a>1、客户端连接到Web服务器</h4><p>一个HTTP客户端，通常是浏览器，与Web服务器的HTTP端口（默认为80）建立一个TCP套接字连接。</p>
<h4 id="2、发送HTTP请求"><a href="#2、发送HTTP请求" class="headerlink" title="2、发送HTTP请求"></a>2、发送HTTP请求</h4><p>通过TCP套接字，客户端向Web服务器发送一个文本的请求报文，一个请求报文由请求行、请求头部、空行和请求数据4部分组成。</p>
<h4 id="3、服务器接受请求并返回HTTP响应"><a href="#3、服务器接受请求并返回HTTP响应" class="headerlink" title="3、服务器接受请求并返回HTTP响应"></a>3、服务器接受请求并返回HTTP响应</h4><p>Web服务器解析请求，定位请求资源。服务器将资源复本写到TCP套接字，由客户端读取。一个响应由状态行、响应头部、空行和响应数据4部分组成。</p>
<h4 id="4、释放连接TCP连接"><a href="#4、释放连接TCP连接" class="headerlink" title="4、释放连接TCP连接"></a>4、释放连接TCP连接</h4><p>若connection 模式为close，则服务器主动关闭TCP连接，客户端被动关闭连接，释放TCP连接;若connection 模式为keepalive，则该连接会保持一段时间，在该时间内可以继续接收请求;</p>
<h4 id="5、客户端浏览器解析HTML内容"><a href="#5、客户端浏览器解析HTML内容" class="headerlink" title="5、客户端浏览器解析HTML内容"></a>5、客户端浏览器解析HTML内容</h4><p>客户端浏览器首先解析状态行，查看表明请求是否成功的状态代码。然后解析每一个响应头，响应头告知以下为若干字节的HTML文档和文档的字符集。客户端浏览器读取响应数据HTML，根据HTML的语法对其进行格式化，并在浏览器窗口中显示。</p>
<p>例如：在浏览器地址栏键入URL，按下回车之后会经历以下流程：</p>
<p>1、浏览器向 DNS 服务器请求解析该 URL 中的域名所对应的 IP 地址;</p>
<p>2、解析出 IP 地址后，根据该 IP 地址和默认端口 80，和服务器建立TCP连接;</p>
<p>3、浏览器发出读取文件(URL 中域名后面部分对应的文件)的HTTP 请求，该请求报文作为 TCP 三次握手的第三个报文的数据发送给服务器;</p>
<p>4、服务器对浏览器请求作出响应，并把对应的 html 文本发送给浏览器;</p>
<p>5、释放 TCP连接;</p>
<p>6、浏览器将该 html 文本并显示内容;</p>

  </div>
  <!--评论块-->
    

</article>
<nav class="post-nav">
  <!-- Prev Nav -->
    


  <!-- Next Nav -->
    
  <a href="/2018/10/22/Rudder-Rush总结/" id="post_nav-older" class="post-nav-content next-content">
      旧篇
  </a>
    
</nav>
<div class="post-toc-btn"><i class="material-icons">format_list_numbered</i></div>
<div class="post-toc-none"><p>(无)</p></div>
<div class="post-toc-box">
    <ol class="post-toc"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTP协议"><span class="post-toc-number">1.</span> <span class="post-toc-text">HTTP协议</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#建立HTTP连接"><span class="post-toc-number">2.</span> <span class="post-toc-text">建立HTTP连接</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTP之请求Request"><span class="post-toc-number">3.</span> <span class="post-toc-text">HTTP之请求Request</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#GET请求方法"><span class="post-toc-number">3.1.</span> <span class="post-toc-text">GET请求方法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#POST请求方法"><span class="post-toc-number">3.2.</span> <span class="post-toc-text">POST请求方法</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#请求-Request-消息"><span class="post-toc-number">3.3.</span> <span class="post-toc-text">请求(Request)消息</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#GET请求例子："><span class="post-toc-number">3.3.1.</span> <span class="post-toc-text">GET请求例子：</span></a></li></ol></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#响应（Response）消息"><span class="post-toc-number">3.4.</span> <span class="post-toc-text">响应（Response）消息</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-5"><a class="post-toc-link" href="#Response响应例子："><span class="post-toc-number">3.4.1.</span> <span class="post-toc-text">Response响应例子：</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#状态码"><span class="post-toc-number">4.</span> <span class="post-toc-text">状态码</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#HTTP工作原理"><span class="post-toc-number">5.</span> <span class="post-toc-text">HTTP工作原理</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#1、客户端连接到Web服务器"><span class="post-toc-number">5.1.</span> <span class="post-toc-text">1、客户端连接到Web服务器</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#2、发送HTTP请求"><span class="post-toc-number">5.2.</span> <span class="post-toc-text">2、发送HTTP请求</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#3、服务器接受请求并返回HTTP响应"><span class="post-toc-number">5.3.</span> <span class="post-toc-text">3、服务器接受请求并返回HTTP响应</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#4、释放连接TCP连接"><span class="post-toc-number">5.4.</span> <span class="post-toc-text">4、释放连接TCP连接</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#5、客户端浏览器解析HTML内容"><span class="post-toc-number">5.5.</span> <span class="post-toc-text">5、客户端浏览器解析HTML内容</span></a></li></ol></li></ol>
</div>
<!--<div class="post-back"><i class="material-icons">arrow_back</i></div>-->
<script type="text/javascript">
    menu();
</script>
  </div>
</div>
<div id="bottom-outer">
  <div id="bottom-inner">
    <a  id="top-button" onfocus="this.blur();"><div class="up upinbody" style="background-color:#26A69A"><i class="material-icons material-up">vertical_align_top</i></div></a>


<p >Copyright ©  2017  Yan&#39;s Blog</p>
<p >Powered by <a href="https://hexo.io/" target="_blank"> Hexo </a> & Theme - <a href="https://github.com/moumao/hexo-theme-Vateral" target="_blank">Vateral</a></p>
<p style="font-size: 10px" id="footer-times" data-time="2/8/2018 13:00:00"></p>
<script>
    var beginTime=document.getElementById("footer-times").dataset.time
    function show_date_time(){
        var span=document.getElementById("footer-times")
        window.setTimeout("show_date_time()", 1000);
        BirthDay=new Date(beginTime);//初始日期
        today=new Date();
        timeold=(today.getTime()-BirthDay.getTime());
        sectimeold=timeold/1000
        secondsold=Math.floor(sectimeold);
        msPerDay=24*60*60*1000
        e_daysold=timeold/msPerDay
        daysold=Math.floor(e_daysold);
        e_hrsold=(e_daysold-daysold)*24;
        hrsold=Math.floor(e_hrsold);
        e_minsold=(e_hrsold-hrsold)*60;
        minsold=Math.floor((e_hrsold-hrsold)*60);
        seconds=Math.floor((e_minsold-minsold)*60);
        span.innerHTML="本站已运行"+daysold+"天"+hrsold+"小时"+minsold+"分"+seconds+"秒";
    }
    show_date_time();
</script>

  </div>
</div>

<!--影集界面需要的资源-->



<!-- scripts list from theme config.yml -->

<script src="/js/jquery-3.1.1.min.js"></script>

<script src="/js/materialize.min.js"></script>

<script src="/js/main.min.js"></script>


<script>
    NProgress.start();
    NProgress.done();
    lazy();
    links();
    window.onpopstate = menu();
    //pjax操作
    $(document).pjax('a:not(.nopjax)', '#content-inner', {fragment:'#content-inner', timeout:8000});
    $(document).on('pjax:start', NProgress.start).on('pjax:end', NProgress.done)
        .on('pjax:end', () => {
            dowmdiv();
            lazy();
            toc();
            links();
            menu();
        });
</script>

<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

</body>
</html>
